!function(e){function t(s){if(i[s])return i[s].exports;var r=i[s]={exports:{},id:s,loaded:!1};return e[s].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="/dist/",t(0)}([function(e,t,i){i(1),i(1),function(){throw new Error('Cannot find module "dist/aframe-colorwheel-component.min.js"')}()},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=i(3),o=s(r),n=i(2);AFRAME.registerComponent("colorwheel",{dependencies:["raycaster"],tweenDuration:280,tweenEasing:TWEEN.Easing.Cubic.Out,padding:.15,hsv:{h:0,s:0,v:1},defaultMaterial:{color:"#ffffff",flatShading:!0,transparent:!0,shader:"flat",fog:!1,side:"double"},color:"#ffffff",schema:{disabled:{type:"boolean",default:!1},backgroundColor:{type:"color",default:"#FFF"},wheelSize:{type:"number",default:.4},showSelection:{type:"boolean",default:!0},selectionSize:{type:"number",default:.1},showHexValue:{type:"boolean",default:!1},showSwatches:{type:"boolean",default:!1},swatches:{type:"array",default:["#000000","#FFFFFF","#ff0000","#007dff","#ffed00"]}},setPositionTween:function(e,t,i){return this.tween=new TWEEN.Tween(t).to(i,this.tweenDuration).onUpdate(function(){e.position.x=this.x,e.position.y=this.y,e.position.z=this.z}).easing(this.tweenEasing).start(),this.tween},setColorTween:function(e,t,i){return this.tween=new TWEEN.Tween(new THREE.Color(t)).to(i,this.tweenDuration).onUpdate(function(){e.color.r=this.r,e.color.g=this.g,e.color.b=this.b}).easing(this.tweenEasing).start(),this.tween},setRotationTween:function(e,t){return this.tween=new TWEEN.Tween(e).to(t,this.tweenDuration).start(),this.tween},init:function(){var e=this,t=this.padding,i=this.defaultMaterial;if(this.backgroundWidth=this.backgroundHeight=2*this.data.wheelSize,this.brightnessSliderHeight=2*(this.data.wheelSize+t),this.brightnessSliderWidth=.1,AFRAME.components.hasOwnProperty("rounded")?(this.background=document.createElement("a-rounded"),this.background.setAttribute("radius",.02),this.background.setAttribute("position",{x:-(this.data.wheelSize+t),y:-(this.data.wheelSize+t),z:-.001})):(this.background=document.createElement("a-plane"),this.background.setAttribute("position",{x:0,y:0,z:-.001})),this.background.setAttribute("width",this.backgroundWidth+2*t),this.background.setAttribute("height",this.backgroundHeight+2*t),this.background.setAttribute("material","shader","flat"),this.background.setAttribute("side","double"),this.el.appendChild(this.background),this.swatchReady=!1,this.swatchContainer=document.createElement("a-plane"),this.swatchContainer.addEventListener("loaded",function(){this.swatchReady=!0}.bind(this)),this.data.showSwatches&&this.generateSwatches(this.data.swatches),this.data.showHexValue){var s=.1,r=2*(this.data.wheelSize+t);this.hexValueText=document.createElement("a-entity"),this.hexValueText.setAttribute("geometry",{primitive:"plane",width:r-this.brightnessSliderWidth,height:s}),this.hexValueText.setAttribute("material",i),this.hexValueText.setAttribute("position",{x:-this.brightnessSliderWidth,y:this.data.wheelSize+s,z:0}),this.hexValueText.setAttribute("material","opacity",0),this.hexValueText.setAttribute("text",{width:r,height:s,align:"right",baseline:"center",wrapCount:20.4,color:"#666"}),this.hexValueText.addEventListener("click",function(){var t=e.hexValueText.getAttribute("text");(0,o.default)(t.value)}),this.el.appendChild(this.hexValueText)}this.colorWheel=document.createElement("a-circle"),this.colorWheel.setAttribute("radius",this.data.wheelSize),this.colorWheel.setAttribute("material",i),this.colorWheel.setAttribute("position",{x:0,y:0,z:.001}),this.el.appendChild(this.colorWheel),this.brightnessSlider=document.createElement("a-plane"),this.brightnessSlider.setAttribute("width",this.brightnessSliderWidth),this.brightnessSlider.setAttribute("height",this.brightnessSliderHeight),this.brightnessSlider.setAttribute("material",i),this.brightnessSlider.setAttribute("position",{x:this.data.wheelSize+this.brightnessSliderWidth,y:0,z:.001}),this.el.appendChild(this.brightnessSlider),this.data.showSelection&&(this.selectionEl=document.createElement("a-circle"),this.selectionEl.setAttribute("radius",this.data.selectionSize),this.selectionEl.setAttribute("material",i),this.selectionEl.setAttribute("position",{x:-this.data.wheelSize,y:this.data.wheelSize,z:.001}),this.el.appendChild(this.selectionEl)),this.colorCursorOptions={cursorRadius:.025,cursorSegments:32,cursorColor:new THREE.Color(0)},this.colorCursorOptions.cursorMaterial=new THREE.MeshBasicMaterial({color:this.colorCursorOptions.cursorColor,transparent:!0}),this.colorCursor=document.createElement("a-entity"),this.brightnessCursor=document.createElement("a-entity");var n=new THREE.TorusBufferGeometry(this.colorCursorOptions.cursorRadius,this.colorCursorOptions.cursorRadius-.02,this.colorCursorOptions.cursorSegments,this.colorCursorOptions.cursorSegments/4);this.colorCursor.setObject3D("mesh",new THREE.Mesh(n,this.colorCursorOptions.cursorMaterial)),this.brightnessCursor.setObject3D("mesh",new THREE.Mesh(n,this.colorCursorOptions.cursorMaterial)),this.el.appendChild(this.colorCursor),this.brightnessSlider.appendChild(this.brightnessCursor),this.brightnessCursor.setAttribute("position",{x:0,y:this.brightnessSliderHeight/2,z:0}),this.bindMethods(),setTimeout(function(){e.el.initColorWheel(),e.el.initBrightnessSlider(),e.el.refreshRaycaster(),e.colorWheel.addEventListener("click",function(t){e.data.disabled||e.el.onHueDown(t.detail.intersection.point)}),e.brightnessSlider.addEventListener("click",function(t){e.data.disabled||e.el.onBrightnessDown(t.detail.intersection.point)})},5)},generateSwatches:function(e){if(void 0!==e){var t=this,i=2*(this.data.wheelSize+this.padding),s=.15,r=i/e.length;this.swatchContainer.setAttribute("width",i),this.swatchContainer.setAttribute("height",s),this.swatchContainer.setAttribute("material",this.defaultMaterial),this.swatchContainer.setAttribute("material","shader","flat"),this.swatchContainer.setAttribute("position",{x:0,y:-this.backgroundHeight+s,z:.03}),this.swatchContainer.setAttribute("rotation",{x:-30,y:0,z:0});for(var o=function(o){var n=e[o],a=document.createElement("a-plane");a.setAttribute("material",t.defaultMaterial),a.setAttribute("material","shader","flat"),a.setAttribute("width",r),a.setAttribute("height",s),a.setAttribute("color",n),a.setAttribute("class","swatch"),a.setAttribute("position",{x:-(i-r)/2+o*r,y:0,z:.001}),a.addEventListener("click",function(){return t.findPositions(n)}),t.swatchContainer.appendChild(a)},n=0;n<e.length;n++)o(n);this.el.appendChild(this.swatchContainer)}},bindMethods:function(){this.el.generateSwatches=this.generateSwatches.bind(this),this.el.initColorWheel=this.initColorWheel.bind(this),this.el.initBrightnessSlider=this.initBrightnessSlider.bind(this),this.el.updateColor=this.updateColor.bind(this),this.el.onHueDown=this.onHueDown.bind(this),this.el.onBrightnessDown=this.onBrightnessDown.bind(this),this.el.refreshRaycaster=this.refreshRaycaster.bind(this)},refreshRaycaster:function(){var e=AFRAME.scenes[0].querySelector("[raycaster]");e.components.raycaster.refreshObjects()},initBrightnessSlider:function(){var e="\n      varying vec2 vUv;\n      void main(){\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);\n      }\n    ",t="\n      uniform vec3 color1;\n      uniform vec3 color2;\n      varying vec2 vUv;\n\n      void main(){\n        vec4 c1 = vec4(color1, 1.0);\n  \t    vec4 c2 = vec4(color2, 1.0);\n\n        vec4 color = mix(c2, c1, smoothstep(0.0, 1.0, vUv.y));\n        gl_FragColor = color;\n      }\n    ",i=new THREE.ShaderMaterial({uniforms:{color1:{type:"c",value:new THREE.Color(16777215)},color2:{type:"c",value:new THREE.Color(0)}},vertexShader:e,fragmentShader:t});this.brightnessSlider.getObject3D("mesh").material=i,this.brightnessSlider.getObject3D("mesh").material.needsUpdate=!0},initColorWheel:function(){var e=this.colorWheel.getObject3D("mesh"),t="\n\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n        gl_Position = projectionMatrix * mvPosition;\n      }\n    ",i="\n      #define M_PI2 6.28318530718\n      uniform float brightness;\n      varying vec2 vUv;\n      vec3 hsb2rgb(in vec3 c){\n          vec3 rgb = clamp(abs(mod(c.x * 6.0 + vec3(0.0, 4.0, 2.0), 6.0) - 3.0) - 1.0, 0.0, 1.0 );\n          rgb = rgb * rgb * (3.0 - 2.0 * rgb);\n          return c.z * mix( vec3(1.0), rgb, c.y);\n      }\n\n      void main() {\n        vec2 toCenter = vec2(0.5) - vUv;\n        float angle = atan(toCenter.y, toCenter.x);\n        float radius = length(toCenter) * 2.0;\n        vec3 color = hsb2rgb(vec3((angle / M_PI2) + 0.5, radius, brightness));\n        gl_FragColor = vec4(color, 1.0);\n      }\n      ",s=new THREE.ShaderMaterial({uniforms:{brightness:{type:"f",value:this.hsv.v}},vertexShader:t,fragmentShader:i});e.material=s,e.material.needsUpdate=!0},findPositions:function(e){var t=this.colorWheel.getObject3D("mesh"),i=this.brightnessCursor.getObject3D("mesh"),s=(this.brightnessSlider.getObject3D("mesh"),this.hexToRgb(e));this.hsv=this.rgbToHsv(s.r,s.g,s.b);var r=2*this.hsv.h*Math.PI,o=this.hsv.s*this.data.wheelSize,n=o*Math.cos(r),a=o*Math.sin(r),h=t.position.z,l=new THREE.Vector3(n,a,h);t.localToWorld(l),this.onHueDown(l);var c=this.hsv.v*this.brightnessSliderHeight,u=c-this.brightnessSliderHeight,d=new THREE.Vector3(0,u,0);this.setPositionTween(i,i.position,d),t.material.uniforms.brightness.value=this.hsv.v},onBrightnessDown:function(e){var t=this.brightnessSlider.getObject3D("mesh"),i=this.brightnessCursor.getObject3D("mesh"),s=this.colorWheel.getObject3D("mesh");t.updateMatrixWorld(),t.worldToLocal(e);var r=e.y+this.brightnessSliderHeight/2,o=r/this.brightnessSliderHeight,n={x:0,y:e.y-this.brightnessSliderHeight/2,z:0};this.setPositionTween(i,i.position,n),s.material.uniforms.brightness.value=o,this.hsv.v=o,this.el.updateColor()},onHueDown:function(e){var t=this.colorWheel.getObject3D("mesh"),i=this.colorCursor.getObject3D("mesh"),s=this.data.wheelSize;t.updateMatrixWorld(),t.worldToLocal(e),this.setPositionTween(i,i.position,e);var r={r:Math.sqrt(e.x*e.x+e.y*e.y),theta:Math.PI+Math.atan2(e.y,e.x)},o=(r.theta*(180/Math.PI)+180)%360;this.hsv.h=o/360,this.hsv.s=r.r/s,this.el.updateColor()},updateColor:function(){var e=this.hsvToRgb(this.hsv),t="rgb("+e.r+", "+e.g+", "+e.b+")",i="#"+new THREE.Color(t).getHexString(),s=this.selectionEl.getObject3D("mesh"),r=this.colorCursor.getObject3D("mesh"),o=this.brightnessCursor.getObject3D("mesh");this.data.showSelection&&(this.setColorTween(s.material,s.material.color,new THREE.Color(t)),s.material.needsUpdate=!0),this.hsv.v>=.5?(this.setColorTween(r.material,r.material.color,new THREE.Color(0)),this.setColorTween(o.material,o.material.color,new THREE.Color(0))):(this.setColorTween(r.material,r.material.color,new THREE.Color(16777215)),this.setColorTween(o.material,o.material.color,new THREE.Color(16777215))),this.data.showHexValue&&this.hexValueText.setAttribute("text","value",i);var a={style:t,rgb:e,hsv:this.hsv,hex:i};n.emit(this.el,"changecolor",a),n.emit(document.body,"didchangecolor",a)},hexToRgb:function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,s){return"#"+t+t+i+i+s+s}).substring(1).match(/.{2}/g).map(function(e){return parseInt(e,16)});return{r:t[0],g:t[1],b:t[2]}},rgbToHsv:function(e,t,i){var s,r=Math.max(e,t,i),o=Math.min(e,t,i),n=r-o,a=0===r?0:n/r,h=r;switch(1===arguments.length&&(t=e.g,i=e.b,e=e.r),r){case o:s=0;break;case e:s=t-i+n*(t<i?6:0),s/=6*n;break;case t:s=i-e+2*n,s/=6*n;break;case i:s=e-t+4*n,s/=6*n}return{h:s,s:a,v:h/255}},hsvToRgb:function(e){var t,i,s,r,o,n,a,h,l=THREE.Math.clamp(e.h,0,1),c=THREE.Math.clamp(e.s,0,1),u=e.v;switch(r=Math.floor(6*l),o=6*l-r,n=u*(1-c),a=u*(1-o*c),h=u*(1-(1-o)*c),r%6){case 0:t=u,i=h,s=n;break;case 1:t=a,i=u,s=n;break;case 2:t=n,i=u,s=h;break;case 3:t=n,i=a,s=u;break;case 4:t=h,i=n,s=u;break;case 5:t=u,i=n,s=a}return{r:Math.round(255*t),g:Math.round(255*i),b:Math.round(255*s)}},update:function(e){e&&this.background.setAttribute("color",this.data.backgroundColor)},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-colorwheel",{defaultComponents:{colorwheel:{}},mappings:{disabled:"colorwheel.disabled",backgroundcolor:"colorwheel.backgroundColor",showselection:"colorwheel.showSelection",wheelsize:"colorwheel.wheelSize",selectionsize:"colorwheel.selectionSize",showhexvalue:"colorwheel.showHexValue",showswatches:"colorwheel.showSwatches",swatches:"colorwheel.swatches"}})},function(e,t){"use strict";e.exports={emit:function(e,t,i){e.dispatchEvent(new CustomEvent(t,{detail:i}))}}},function(e,t,i){"use strict";function s(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function r(e,t){var i,r,a,h,l,c,u=!1;t||(t={}),i=t.debug||!1;try{a=o(),h=document.createRange(),l=document.getSelection(),c=document.createElement("span"),c.textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",document.body.appendChild(c),h.selectNode(c),l.addRange(h);var d=document.execCommand("copy");if(!d)throw new Error("copy command was unsuccessful");u=!0}catch(o){i&&console.error("unable to copy using execCommand: ",o),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),u=!0}catch(o){i&&console.error("unable to copy using clipboardData: ",o),i&&console.error("falling back to prompt"),r=s("message"in t?t.message:n),window.prompt(r,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(h):l.removeAllRanges()),c&&document.body.removeChild(c),a()}return u}var o=i(4),n="Copy to clipboard: #{key}, Enter";e.exports=r},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,i=[],s=0;s<e.rangeCount;s++)i.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||i.forEach(function(t){e.addRange(t)}),t&&t.focus()}}}]);
//# sourceMappingURL=aframe-colorwheel-component.js.map